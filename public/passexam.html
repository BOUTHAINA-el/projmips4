<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Passer l'examen</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
<body>
    <h1 class="text-center mb-4">Passer l'examen</h1>
    <div class="input-group mb-3">
        <input type="text" id="examId" class="form-control" placeholder="Entrer l'ID de l'examen">
        <button id="loadExam" class="btn btn-primary">Entrer</button>
    </div>
<script>
       let currentIndex = 0;
        let score = 0;
        let examData = null;
        let timer = null;


    
        function showQuestion() {
            if (currentIndex >= examData.questions.length) {
                document.getElementById('examContainer').innerHTML = '';
                document.getElementById('scoreContainer').innerText = `Votre score final: ${score}`;
                return;
            }

            const q = examData.questions[currentIndex];
            const optionsHtml = q.type === 'qcm' 
                ? `<small class="form-text text-muted">Entrez les indices séparés par ; (ex: 0;2)</small>` 
                : '';

            document.getElementById('examContainer').innerHTML = `
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Q${currentIndex + 1}: ${q.text}</h5>
                        ${q.media ? `<${detectMedia(q.media)} src="/${q.media}" controls class="mb-3" style="max-width:100%;"></${detectMedia(q.media)}>` : ''}
                        <input type="text" id="answer" class="form-control mb-2" placeholder="Votre réponse">
                        ${optionsHtml}
                        <button class="btn btn-success" onclick="checkAnswer()">Soumettre</button>
                        <div id="timer" class="mt-2 text-end text-muted"></div>
                    </div>
                </div>
            `;
            startTimer(q.time);
        }
</script>    
</body>
</html>